<template>
  <nav :class="['nav-2', { sticky: isSticky }]">
    <div class="router-container">
      <router-link to="/">–ì–ª–∞–≤–Ω–∞—è</router-link>
      <router-link to="/kcm">–ö–°–ú</router-link>

      <div class="dropdown">
        <div class="dropdown-trigger">
          <span class="menu-label">–£—Å–ª—É–≥–∏</span>
          <span class="arrow material-symbols-outlined">arrow_drop_down</span>
        </div>

        <div class="dropdownContent">
          <ul class="dropdownList">
            <li v-for="service in servicesList" :key="service.id" class="dropdownItem">
             <router-link 
  :to="{ name: 'servicedesk', params: { servicedesc: toSlug(service.name )} }">
  {{ service.name }}
</router-link>

            </li>
          </ul>
        </div>
      </div>

      <router-link to="/examples">–û–±—ä–µ–∫—Ç—ã</router-link>
      <router-link to="/gallery">–ì–∞–ª–µ—Ä–µ—è</router-link>
      <router-link to="/contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</router-link>
    </div>
  </nav>
</template>
<script setup>
import { ref, onMounted, onUnmounted, reactive} from 'vue';
import { useRoute } from 'vue-router';

const servicesList = reactive([
  {name: "üè° –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ–º–æ–≤ –∏ –∫–æ—Ç—Ç–µ–¥–∂–µ–π", id: 1 },
  {name: "üè¢ –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –º–Ω–æ–≥–æ—ç—Ç–∞–∂–Ω—ã—Ö –¥–æ–º–æ–≤", id: 2 },
  {name: "üõ†Ô∏è –†–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä –∏ –∫–æ–º–Ω–∞—Ç", id: 3 },
  {name: "üß± –ö–ª–∞–¥–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã ", id: 4 },
  {name: "üõ¢Ô∏è –ö—Ä–æ–≤–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã  ", id: 5 },
  {name: "üèóÔ∏è –ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è  ", id: 6 },
  {name: "üé® –û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã ", id: 7 },
  {name: "üèòÔ∏è –§–∞—Å–∞–¥–Ω—ã–µ —Ä–∞–±–æ—Ç—ã  ", id: 8 },
  {name: "üöß –ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏  ", id: 9 },
  {name: "üå≥ –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω ", id: 10 }
])

function toSlug(text) {
  const translitMap = {
    '–∞':'a','–±':'b','–≤':'v','–≥':'g','–¥':'d','–µ':'e','—ë':'yo','–∂':'zh','–∑':'z','–∏':'i','–π':'y',
    '–∫':'k','–ª':'l','–º':'m','–Ω':'n','–æ':'o','–ø':'p','—Ä':'r','—Å':'s','—Ç':'t','—É':'u','—Ñ':'f',
    '—Ö':'h','—Ü':'ts','—á':'ch','—à':'sh','—â':'sch','—ä':'','—ã':'y','—å':'','—ç':'e','—é':'yu','—è':'ya'
  };

  return text
    .toLowerCase()
    .replace(/[–∞-—è—ë]/g, char => translitMap[char] || '') // –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
    .replace(/[^a-z0-9]+/g, '-')                         // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –Ω–∞ —Ç–∏—Ä–µ
    .replace(/^-+|-+$/g, '')                             // –£–±—Ä–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ/–∫–æ–Ω–µ—á–Ω—ã–µ —Ç–∏—Ä–µ
    .replace(/-{2,}/g, '-');                             // –£–±—Ä–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç–∏—Ä–µ
}
const route = useRoute()
const slug = route.params.slug


const isSticky = ref(false);
const handleScroll = () => {
  isSticky.value = window.scrollY > 200; // 100px ‚Äî –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø–æ –∂–µ–ª–∞–Ω–∏—é
};
onMounted(() => {
  window.addEventListener('scroll', handleScroll);
});
onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll);
});
</script>
<style scoped>
.nav-2 {
  width: 100%;
  display: flex;
  justify-content: center;
  transition: all 0.3s ease-in-out;
  position: static;
  background-color: transparent;
  padding: 20px;
  z-index: 1000;
}

.nav-2.sticky {
  position: fixed;
  top: 0;
  left: 0;
  background-color: #005689;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transform: translateY(0);
  padding: 10px 20px;
  animation: fadeInDown 0.3s ease;
}

@keyframes fadeInDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.router-container {
  display: flex;
  justify-content: space-around;
  align-items: center;
  width: 100%;
}

.router-container a {
  text-align: center;
  color: white;
  text-decoration: none;
  padding: 10px 15px;
  font-size: 1.2em;
  width: 100%;
  transition: background 0.2s;
}

.router-container a:hover  {
  background: rgba(255, 255, 255, 0.1);
}

nav a.router-link-exact-active {
  background: rgba(15, 82, 252, 0.5);
}

.dropdown {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: white;
  cursor: pointer;
  color: white;
  text-decoration: none;
  padding: 10px 15px;
  width: 100%;
  font-size: 1.2em;
}

.dropdown-trigger {
  display: flex;
  align-items: center;
  padding: 10px 15px;
}

.dropdownContent {
  font-size: 0.8em;
  position: absolute;
  top: 100%;
  left: 0;
  background: #005689;
  display: none;
  flex-direction: column;
  padding: 10px;
  border-radius: 0 0 6px 6px;
  min-width: 250px;
  z-index: 1000;
}

.dropdown:hover .dropdownContent {
  display: flex;
}

.dropdownItem {
  width: 100%;
  list-style: none;
  padding: 8px 12px;
  color: white;
  cursor: pointer;
  white-space: nowrap;
}

</style>